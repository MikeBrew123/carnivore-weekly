<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Get your personalized AI-generated carnivore diet report. Answer questions about your goals, health, and preferences for customized recommendations.">
    <link rel="canonical" href="https://carnivoreweekly.com/questionnaire.html">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://carnivoreweekly.com/questionnaire.html">
    <meta property="og:title" content="AI Report Questionnaire - Carnivore Weekly">
    <meta property="og:description" content="Get your personalized AI-generated carnivore diet report. Answer questions about your goals, health, and preferences for customized recommendations.">
    <meta property="og:image" content="https://carnivoreweekly.com/images/logo.png">
    <meta property="og:site_name" content="Carnivore Weekly">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://carnivoreweekly.com/questionnaire.html">
    <meta name="twitter:title" content="AI Report Questionnaire - Carnivore Weekly">
    <meta name="twitter:description" content="Get your personalized AI-generated carnivore diet report. Answer questions about your goals, health, and preferences for customized recommendations.">
    <meta name="twitter:image" content="https://carnivoreweekly.com/images/logo.png">

    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="android-chrome-192x192.png">
    <title>AI Report Questionnaire | Carnivore Weekly</title>

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-NR4JVKW2JV"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-NR4JVKW2JV');
    </script>

    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Merriweather:wght@400;700&display=swap" rel="stylesheet">

    <!-- Marked.js for Markdown to HTML conversion -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Merriweather', serif;
            line-height: 1.8;
            color: #2c1810;
            background: #1a120b;
            min-height: 100vh;
        }

        /* Leather texture background */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(rgba(58, 35, 23, 0.7), rgba(58, 35, 23, 0.7)),
                url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"><defs><filter id="noise"><feTurbulence baseFrequency="0.9" numOctaves="4" seed="0"/></filter></defs><rect width="100%" height="100%" filter="url(%23noise)" opacity="0.3"/></svg>');
            background-color: #3a2317;
            background-size: 200px 200px, 100% 100%;
            z-index: -1;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, #4a2511 0%, #6d3819 50%, #8b4513 100%);
            color: #f4e4d4;
            padding: 60px 0 40px 0;
            margin-bottom: 40px;
            box-shadow:
                0 10px 30px rgba(0,0,0,0.5),
                inset 0 2px 0 rgba(255,255,255,0.1);
            border-bottom: 4px solid #8b4513;
            position: relative;
            overflow: visible;
            margin-left: -20px;
            margin-right: -20px;
            margin-top: -40px;
        }

        header::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url('https://images.unsplash.com/photo-1558030006-450675393462?w=1200&q=80');
            background-size: cover;
            background-position: center;
            opacity: 0.15;
            z-index: 0;
        }

        header > .header-container {
            position: relative;
            z-index: 1;
            max-width: 900px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .logo {
            position: absolute;
            top: -80px;
            right: -100px;
            max-width: 600px;
            height: auto;
            opacity: 0.95;
            filter:
                sepia(0.8)
                brightness(0.85)
                contrast(1.5)
                drop-shadow(3px 3px 8px rgba(0, 0, 0, 0.9))
                drop-shadow(-2px -2px 4px rgba(255, 255, 255, 0.1));
            transform: rotate(28deg);
            mix-blend-mode: multiply;
            z-index: 0;
        }

        header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3.5em;
            margin-bottom: 15px;
            text-align: center;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.7);
            font-weight: 900;
            letter-spacing: 3px;
            color: #f4e4d4;
            position: relative;
            z-index: 10;
        }

        header p {
            text-align: center;
            font-size: 1.2em;
            opacity: 0.9;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            position: relative;
            z-index: 10;
        }

        @media (max-width: 768px) {
            .logo {
                max-width: 200px;
                top: 15px;
                right: 5px;
            }

            header h1 {
                font-size: 2em;
            }
        }

        /* Warning banner */
        .warning-banner {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #1a120b;
            padding: 25px 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            border: 3px solid #d4a574;
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.4);
        }

        .warning-banner h2 {
            font-family: 'Playfair Display', serif;
            font-size: 1.8em;
            margin-bottom: 10px;
        }

        .warning-banner ul {
            margin: 15px 0 0 25px;
            line-height: 1.8;
        }

        .warning-banner strong {
            color: #8b4513;
        }

        /* Form sections */
        .form-section {
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid #8b4513;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        .form-section h3 {
            font-family: 'Playfair Display', serif;
            color: #8b4513;
            font-size: 1.6em;
            margin-bottom: 10px;
            border-bottom: 2px solid #d4a574;
            padding-bottom: 10px;
        }

        .form-section .subtitle {
            color: #666;
            font-size: 0.95em;
            margin-bottom: 20px;
            font-style: italic;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-weight: bold;
            color: #2c1810;
            margin-bottom: 8px;
        }

        .optional {
            font-weight: normal;
            font-size: 0.9em;
            color: #666;
            font-style: italic;
        }

        input[type="text"],
        input[type="email"],
        textarea,
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #d4a574;
            border-radius: 8px;
            font-family: 'Merriweather', serif;
            font-size: 1em;
            background: white;
            transition: border-color 0.3s;
        }

        input:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: #8b4513;
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .checkbox-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .checkbox-item label {
            margin: 0;
            font-weight: normal;
            cursor: pointer;
        }

        /* Medical disclaimer */
        .medical-disclaimer {
            background: rgba(255, 237, 78, 0.2);
            border-left: 4px solid #ffd700;
            padding: 15px;
            margin-top: 20px;
            border-radius: 5px;
            font-size: 0.9em;
            color: #666;
        }

        .medical-disclaimer strong {
            color: #8b4513;
        }

        /* Submit button */
        .submit-section {
            text-align: center;
            margin-top: 40px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid #8b4513;
            border-radius: 12px;
        }

        .submit-button {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #1a120b;
            border: none;
            padding: 18px 50px;
            font-size: 1.3em;
            font-weight: bold;
            border-radius: 10px;
            cursor: pointer;
            font-family: 'Playfair Display', serif;
            border: 3px solid #d4a574;
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.4);
            transition: all 0.3s;
        }

        .submit-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.6);
        }

        .submit-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .submit-note {
            margin-top: 20px;
            color: #666;
            font-size: 0.95em;
        }

        /* Loading state */
        .loading {
            display: none;
            text-align: center;
            padding: 40px;
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid #8b4513;
            border-radius: 12px;
            margin-top: 30px;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #8b4513;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Report Content Styling */
        #reportContent h1 {
            font-family: 'Playfair Display', serif;
            color: #8b4513;
            font-size: 2.5em;
            margin: 30px 0 20px 0;
            padding-bottom: 15px;
            border-bottom: 3px solid #d4a574;
        }

        #reportContent h2 {
            font-family: 'Playfair Display', serif;
            color: #8b4513;
            font-size: 2em;
            margin: 25px 0 15px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #d4a574;
        }

        #reportContent h3 {
            font-family: 'Playfair Display', serif;
            color: #2c1810;
            font-size: 1.5em;
            margin: 20px 0 10px 0;
        }

        #reportContent h4 {
            font-family: 'Playfair Display', serif;
            color: #2c1810;
            font-size: 1.2em;
            margin: 15px 0 8px 0;
        }

        #reportContent p {
            margin: 15px 0;
            line-height: 1.8;
        }

        #reportContent ul,
        #reportContent ol {
            margin: 15px 0;
            padding-left: 30px;
        }

        #reportContent li {
            margin: 8px 0;
            line-height: 1.6;
        }

        #reportContent strong {
            color: #8b4513;
            font-weight: 700;
        }

        #reportContent em {
            font-style: italic;
            color: #6d3819;
        }

        #reportContent hr {
            border: none;
            border-top: 2px solid #d4a574;
            margin: 30px 0;
        }

        #reportContent blockquote {
            border-left: 4px solid #d4a574;
            padding-left: 20px;
            margin: 20px 0;
            font-style: italic;
            color: #6d3819;
            background: rgba(212, 165, 116, 0.1);
            padding: 15px 15px 15px 20px;
            border-radius: 5px;
        }

        #reportContent code {
            background: rgba(139, 69, 19, 0.1);
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
            font-size: 0.9em;
        }

        #reportContent pre {
            background: rgba(139, 69, 19, 0.1);
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
        }

        #reportContent pre code {
            background: none;
            padding: 0;
        }

        #reportContent table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
        }

        #reportContent table th,
        #reportContent table td {
            border: 1px solid #d4a574;
            padding: 12px;
            text-align: left;
        }

        #reportContent table th {
            background: #8b4513;
            color: white;
            font-family: 'Playfair Display', serif;
            font-weight: 700;
        }

        #reportContent table tr:nth-child(even) {
            background: rgba(212, 165, 116, 0.1);
        }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <img src="images/logo.png" alt="Carnivore Weekly Logo" class="logo">
            <h1>QUESTIONNAIRE</h1>
            <p>AI-Generated Personalized Diet Report</p>
        </div>
    </header>

    <div class="container">

        <div class="warning-banner">
            <h2>‚ö†Ô∏è Important: One-Time Report Generation</h2>
            <ul>
                <li><strong>Fill out as much or as little as you want</strong> - More info = more personalized report</li>
                <li><strong>This generates ONCE.</strong> No saves, no redo, no second chances.</li>
                <li><strong>Your data is deleted immediately</strong> after generation - we keep nothing.</li>
                <li><strong>Download your report and save it</strong> when it's ready - you can't come back!</li>
            </ul>
        </div>

        <form id="aiReportForm">
            <!-- Section 1: Contact Info -->
            <div class="form-section">
                <h3>üìß Contact Information</h3>
                <p class="subtitle">Where should we send your report?</p>

                <div class="form-group">
                    <label>Email Address <span class="optional">(required - for delivery)</span></label>
                    <input type="email" name="email" id="email" required placeholder="your@email.com">
                </div>

                <div class="form-group">
                    <label>First Name <span class="optional">(optional)</span></label>
                    <input type="text" name="firstName" placeholder="e.g., John">
                </div>
            </div>

            <!-- Section 2: Health Restrictions -->
            <div class="form-section">
                <h3>üö´ Allergies & Food Restrictions</h3>
                <p class="subtitle">Help us avoid recommending foods you can't or won't eat</p>

                <div class="form-group">
                    <label>Food Allergies <span class="optional">(optional)</span></label>
                    <textarea name="allergies" placeholder="e.g., Shellfish allergy, lactose intolerant, egg allergy"></textarea>
                </div>

                <div class="form-group">
                    <label>Foods You Can't/Won't Eat <span class="optional">(optional)</span></label>
                    <textarea name="foodRestrictions" placeholder="e.g., No pork for religious reasons, can't afford ribeye, hate fish"></textarea>
                </div>

                <div class="form-group">
                    <label>Dairy Tolerance <span class="optional">(optional)</span></label>
                    <select name="dairyTolerance">
                        <option value="">Select one...</option>
                        <option value="full">Full dairy (butter, cheese, milk, cream)</option>
                        <option value="some">Some dairy (butter and hard cheese only)</option>
                        <option value="none">No dairy at all</option>
                    </select>
                </div>

                <div class="medical-disclaimer">
                    <strong>Medical Disclaimer:</strong> This information is for educational purposes only. If you have severe food allergies or medical conditions, consult your doctor before changing your diet. Bring this report with you to appointments.
                </div>
            </div>

            <!-- Section 3: Current Health -->
            <div class="form-section">
                <h3>üè• Current Health Conditions</h3>
                <p class="subtitle">Help us tailor the plan to your situation (all optional)</p>

                <div class="form-group">
                    <label>Current Medications <span class="optional">(optional)</span></label>
                    <textarea name="medications" placeholder="e.g., Metformin for diabetes, levothyroxine for thyroid, blood pressure medication"></textarea>
                </div>

                <div class="form-group">
                    <label>Existing Health Conditions <span class="optional">(optional)</span></label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="diabetes" name="conditions" value="diabetes">
                            <label for="diabetes">Type 2 Diabetes / Pre-diabetes</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="thyroid" name="conditions" value="thyroid">
                            <label for="thyroid">Thyroid Issues (Hashimoto's, hypothyroid)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="autoimmune" name="conditions" value="autoimmune">
                            <label for="autoimmune">Autoimmune Condition</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="gut" name="conditions" value="gut">
                            <label for="gut">Digestive Issues (IBS, Crohn's, colitis)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="heart" name="conditions" value="heart">
                            <label for="heart">Heart Disease / High Blood Pressure</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="mental" name="conditions" value="mental">
                            <label for="mental">Mental Health (depression, anxiety)</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Other Health Issues <span class="optional">(optional)</span></label>
                    <textarea name="otherConditions" placeholder="e.g., PCOS, gout, kidney issues, anything else we should know"></textarea>
                </div>

                <div class="medical-disclaimer">
                    <strong>Medical Disclaimer:</strong> This report is for informational purposes only and does not replace medical advice. Always consult your healthcare provider before starting a new diet, especially if you have existing health conditions or take medications. Bring this report to your doctor appointments.
                </div>
            </div>

            <!-- Section 4: Current Symptoms -->
            <div class="form-section">
                <h3>üíä Current Symptoms & Issues</h3>
                <p class="subtitle">What are you hoping to improve? (all optional)</p>

                <div class="form-group">
                    <label>Current Symptoms <span class="optional">(optional)</span></label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="bloating" name="symptoms" value="bloating">
                            <label for="bloating">Bloating / Gas</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="brainfog" name="symptoms" value="brainfog">
                            <label for="brainfog">Brain Fog / Poor Focus</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="fatigue" name="symptoms" value="fatigue">
                            <label for="fatigue">Chronic Fatigue / Low Energy</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="jointpain" name="symptoms" value="jointpain">
                            <label for="jointpain">Joint Pain / Inflammation</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="skin" name="symptoms" value="skin">
                            <label for="skin">Skin Issues (acne, eczema, rosacea)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="sleep" name="symptoms" value="sleep">
                            <label for="sleep">Poor Sleep Quality</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="cravings" name="symptoms" value="cravings">
                            <label for="cravings">Sugar Cravings / Food Addiction</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Other Symptoms <span class="optional">(optional)</span></label>
                    <textarea name="otherSymptoms" placeholder="Anything else you're dealing with that we should address?"></textarea>
                </div>
            </div>

            <!-- Section 5: Diet History -->
            <div class="form-section">
                <h3>üçΩÔ∏è Diet History</h3>
                <p class="subtitle">What have you tried before? (all optional)</p>

                <div class="form-group">
                    <label>Previous Diets Tried <span class="optional">(optional)</span></label>
                    <textarea name="previousDiets" placeholder="e.g., Keto for 6 months (lost weight but plateaued), vegan (felt terrible), Standard American Diet (gained weight)"></textarea>
                </div>

                <div class="form-group">
                    <label>Carnivore Experience <span class="optional">(optional)</span></label>
                    <select name="carnivoreExperience">
                        <option value="">Select one...</option>
                        <option value="never">Never tried carnivore</option>
                        <option value="dabbled">Tried it briefly (days/weeks)</option>
                        <option value="months">Did it for months</option>
                        <option value="current">Currently carnivore</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>What Worked / Didn't Work <span class="optional">(optional)</span></label>
                    <textarea name="whatWorked" placeholder="e.g., Lost weight on keto but gained it back, felt great on low-carb but too restrictive, can't stick to meal plans"></textarea>
                </div>
            </div>

            <!-- Section 6: Lifestyle -->
            <div class="form-section">
                <h3>üè† Lifestyle & Practical Constraints</h3>
                <p class="subtitle">Help us make this realistic for YOUR life (all optional)</p>

                <div class="form-group">
                    <label>Cooking Ability <span class="optional">(optional)</span></label>
                    <select name="cookingSkill">
                        <option value="">Select one...</option>
                        <option value="beginner">Beginner (can barely boil water)</option>
                        <option value="basic">Basic (can follow recipes)</option>
                        <option value="intermediate">Intermediate (comfortable in kitchen)</option>
                        <option value="advanced">Advanced (love cooking)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Time Available for Meal Prep <span class="optional">(optional)</span></label>
                    <select name="mealPrepTime">
                        <option value="">Select one...</option>
                        <option value="minimal">Minimal (< 1 hour/week)</option>
                        <option value="some">Some time (1-3 hours/week)</option>
                        <option value="moderate">Moderate (3-5 hours/week)</option>
                        <option value="plenty">Plenty (5+ hours/week)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Budget Constraints <span class="optional">(optional)</span></label>
                    <select name="budget">
                        <option value="">Select one...</option>
                        <option value="tight">Tight budget (ground beef, eggs, cheap cuts)</option>
                        <option value="moderate">Moderate (some variety)</option>
                        <option value="flexible">Flexible (can afford ribeye, salmon)</option>
                        <option value="unlimited">No budget concerns</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Family Situation <span class="optional">(optional)</span></label>
                    <select name="familySituation">
                        <option value="">Select one...</option>
                        <option value="solo">Cooking for myself only</option>
                        <option value="partner">Cooking for partner too (also carnivore)</option>
                        <option value="mixed">Cooking for family (mixed diets)</option>
                        <option value="kids">Cooking for kids (need family-friendly options)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Work/Travel Situation <span class="optional">(optional)</span></label>
                    <textarea name="workTravel" placeholder="e.g., Travel 2 weeks/month for work, eat lunch at desk, frequent business dinners, work from home"></textarea>
                </div>
            </div>

            <!-- Section 7: Goals & Priorities -->
            <div class="form-section">
                <h3>üéØ Goals & Priorities</h3>
                <p class="subtitle">Beyond macros, what matters most to you? (all optional)</p>

                <div class="form-group">
                    <label>Primary Goals (check top 3) <span class="optional">(optional)</span></label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="weightloss" name="goals" value="weightloss">
                            <label for="weightloss">Weight Loss</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="muscle" name="goals" value="muscle">
                            <label for="muscle">Build Muscle</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="energy" name="goals" value="energy">
                            <label for="energy">More Energy</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="mental" name="goals" value="mental">
                            <label for="mental">Mental Clarity / Focus</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="guthealth" name="goals" value="guthealth">
                            <label for="guthealth">Fix Gut Health</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="inflammation" name="goals" value="inflammation">
                            <label for="inflammation">Reduce Inflammation</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="autoimmune" name="goals" value="autoimmune">
                            <label for="autoimmune">Manage Autoimmune Condition</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="simplify" name="goals" value="simplify">
                            <label for="simplify">Simplify My Life / End Food Obsession</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Biggest Challenge or Fear <span class="optional">(optional)</span></label>
                    <textarea name="biggestChallenge" placeholder="e.g., Afraid of eating too much fat, worried about cholesterol, don't know if I can give up bread, scared of social situations"></textarea>
                </div>

                <div class="form-group">
                    <label>Anything Else We Should Know? <span class="optional">(optional)</span></label>
                    <textarea name="anythingElse" placeholder="Tell us anything that would help us create the perfect plan for YOU"></textarea>
                </div>
            </div>

            <!-- Submit Section -->
            <div class="submit-section">
                <button type="submit" class="submit-button" id="submitBtn">
                    üöÄ Generate My AI Report
                </button>
                <p class="submit-note">
                    <strong>Remember:</strong> This generates once. Download and save your report when ready!
                </p>
            </div>
        </form>

        <!-- Loading State -->
        <div class="loading" id="loadingState">
            <div class="spinner"></div>
            <h3>üß† AI is analyzing your information...</h3>
            <p>Generating your personalized carnivore diet report.</p>
            <p style="margin-top: 10px; font-size: 0.9em; color: #666;">This takes 30-60 seconds. Don't close this page!</p>
        </div>
    </div>

    <script>
        // Load macro data from localStorage (saved from calculator)
        let macroData = null;
        try {
            const savedMacros = localStorage.getItem('carnivore_macros');
            if (savedMacros) {
                macroData = JSON.parse(savedMacros);
                console.log('Loaded macro data:', macroData);
            }
        } catch (e) {
            console.error('Error loading macro data:', e);
        }

        // Form submission handler
        document.getElementById('aiReportForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            // Get form data
            const formData = new FormData(this);
            const data = {};

            // Convert FormData to object
            for (let [key, value] of formData.entries()) {
                if (data[key]) {
                    // Handle multiple values (checkboxes)
                    if (Array.isArray(data[key])) {
                        data[key].push(value);
                    } else {
                        data[key] = [data[key], value];
                    }
                } else {
                    data[key] = value;
                }
            }

            // Include macro data if available
            if (macroData) {
                data.macros = macroData;
            }

            // Show loading state
            document.getElementById('aiReportForm').style.display = 'none';
            document.getElementById('loadingState').classList.add('active');

            try {
                // Cloudflare Worker URL for report generation
                const apiUrl = 'https://carnivore-report-api.iambrew.workers.dev';

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });

                if (!response.ok) {
                    throw new Error('Report generation failed');
                }

                const result = await response.json();

                // Clear localStorage (privacy - no data retention)
                localStorage.removeItem('carnivore_macros');

                // Display the generated report
                displayReport(result.report);

            } catch (error) {
                console.error('Error:', error);
                alert('Something went wrong generating your report. Please contact support at your email confirmation.');

                // Show form again
                document.getElementById('loadingState').classList.remove('active');
                document.getElementById('aiReportForm').style.display = 'block';
            }
        });

        // Display the generated report
        function displayReport(reportMarkdown) {
            // Convert Markdown to HTML
            const reportHTML = marked.parse(reportMarkdown);

            // Hide loading
            document.getElementById('loadingState').classList.remove('active');

            // Create report display container
            const reportContainer = document.createElement('div');
            reportContainer.innerHTML = `
                <div style="max-width: 900px; margin: 0 auto; padding: 20px;">
                    <div class="warning-banner" style="margin-bottom: 30px;">
                        <h2>‚ö†Ô∏è SAVE THIS REPORT NOW!</h2>
                        <p><strong>This page will only show once.</strong> We don't save your data. Download/print this report immediately!</p>
                        <div style="margin-top: 20px; display: flex; gap: 15px; justify-content: center;">
                            <button onclick="window.print()" style="background: #8b4513; color: white; border: none; padding: 12px 30px; border-radius: 8px; font-size: 1.1em; cursor: pointer; font-weight: bold;">
                                üñ®Ô∏è Print / Save as PDF
                            </button>
                            <button onclick="downloadReport()" style="background: #ffd700; color: #1a120b; border: none; padding: 12px 30px; border-radius: 8px; font-size: 1.1em; cursor: pointer; font-weight: bold;">
                                üíæ Download HTML
                            </button>
                        </div>
                    </div>

                    <div id="reportContent" style="background: white; padding: 40px; border-radius: 12px; border: 2px solid #8b4513; font-family: 'Merriweather', serif; line-height: 1.8; color: #2c1810;">
                        ${reportHTML}
                    </div>

                    <div class="warning-banner" style="margin-top: 30px;">
                        <p><strong>Remember:</strong> Once you close this page, this report is gone forever. We don't keep your data!</p>
                    </div>
                </div>
            `;

            document.body.innerHTML = '';
            document.body.appendChild(reportContainer);

            // Store report for download
            window.generatedReport = reportHTML;
        }

        // Download report as HTML file
        function downloadReport() {
            const report = window.generatedReport;
            if (!report) return;

            const blob = new Blob([`
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>My Carnivore Diet Report</title>
    <style>
        body { font-family: serif; max-width: 900px; margin: 0 auto; padding: 20px; }
        h1 { color: #8b4513; }
        h2 { color: #8b4513; border-bottom: 2px solid #d4a574; padding-bottom: 10px; }
    </style>
</head>
<body>
${report}
</body>
</html>
            `], { type: 'text/html' });

            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `carnivore-diet-report-${new Date().toISOString().split('T')[0]}.html`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // Warn before leaving page
        window.addEventListener('beforeunload', function(e) {
            const loading = document.getElementById('loadingState');
            if (loading && loading.classList.contains('active')) {
                e.preventDefault();
                e.returnValue = 'Your report is being generated. Are you sure you want to leave?';
                return e.returnValue;
            }

            // Also warn if report is displayed (they should save it first)
            if (window.generatedReport) {
                e.preventDefault();
                e.returnValue = 'Have you saved your report? It will be gone forever if you leave!';
                return e.returnValue;
            }
        });
    </script>
</body>
</html>
