# CarnivoreWeekly.com — Day Log: Sunday, February 8, 2026

## Starting State
- Site health score: 68/100 (Google validation)
- 19 published posts, many with issues
- No validation system
- No writer personas connected to Supabase
- Weekly automation untested with new pipeline

---

## Phase 1: Emergency Audit & Fixes
- 156 duplicate sitemap URLs → 0
- 38 posts with multiple H1 tags → fixed to 1 each
- Duplicate HTML IDs across all pages → unique prefixed IDs
- 12 posts with unrendered `{{ }}` template variables → removed
- 11 orphan posts missing from sitemap → added

## Phase 2: 3-Wall Validation System Built
- **Wall 1:** Content validator (content_validator.py) — 10 rules, 95% auto-fix rate
- **Wall 2:** Pre-commit hook — blocks bad commits locally
- **Wall 3:** GitHub Actions — blocks bad deploys, creates issues on failure
- Weekly health check workflow added (Sunday midnight UTC)

## Phase 3: Legacy Content Cleanup
- 1,087 issues found in pre-existing content
- 71 blog files archived
- 26 public pages fixed
- Result: 1,087 → 6 intentional warnings

## Phase 4: Placeholder Post Crisis
- 22 posts marked published with no content
- Root cause: sync script writing empty content strings
- Fixed sync layer, generation layer, and validation layer
- 3-layer prevention system so it can't happen again

## Phase 5: Writer Agent System
- Discovered Leo's unused Supabase infrastructure (3 writer profiles, memory tables)
- Connected generation pipeline to Supabase
- Validated all 3 writers:
  - **Sarah** — Health coach, evidence-based, "Not a Doctor" disclaimers
  - **Chloe** — Community manager, casual, relatable
  - **Marcus** — Performance coach, direct, protocol-focused
- Each writer pulls persona, memories, and past articles from Supabase before writing

## Phase 6: Content Generation
- **Batch 1:** 12 posts generated (4 per writer) — validated, published
- **Batch 2 Test:** 3 posts through full 10-step pipeline — all passed
- **Batch 2 Full:** 15 posts through autonomous pipeline — all deployed
- Internal cross-linking added (2-5 links per post, cross-writer references)

## Phase 7: Bug Fixes Throughout the Day
- **Markdown not rendering:** Added markdown-to-HTML converter to generation script
- **Missing CSS references:** Blog posts referenced `blog-post.css` and `global.css` — fixed paths, confirmed files exist
- **GitHub Actions failing:** Wall 3 blocked every push due to CSS references — resolved, first green deploy achieved
- **Broken internal links:** 14 links pointing to wrong slugs — 3 root causes identified (missing article, wrong slug, wrong date prefix)
- **Path doubling bug:** `/wiki/#/wiki/#` and `blog/blog/` — appeared 3 times, added permanent Wall 1 auto-fix rule
- **Supabase sync crashes:** INSERT on duplicate slugs — changed to UPSERT
- **Future-dated posts:** Flagged for attention (need publish gate or date correction)
- **"By" with no author name:** UUID vs INT schema mismatch between Supabase tables — used JSON fallback with name mapping
- **Non-English YouTube videos:** Japanese and Indonesian videos appearing — added language detection filter (>20% non-Latin characters = skip)
- **Trending tags dead links:** Pointed to doubled wiki anchors — fixed generation script, added Wall 1 rule

## Phase 8: Weekly Sunday Refresh
- YouTube collection: 11 videos, 134 comments, 12 creators analyzed
- Sentiment analysis and editorial commentary generated
- 2 non-English videos removed (language filter working)
- Homepage, channels, archive, wiki, and newsletter regenerated
- 120 wiki keywords extracted
- Supabase sync completed (22 inserted, 48 existing)

---

## End State
- **Published posts:** 59 blog posts
- **Sitemap:** 66 URLs (submitted to Google Search Console)
- **Validation errors:** 0 critical, 0 blocking
- **GitHub Actions:** Green (first clean deploy)
- **Writer agents:** 3 active, connected to Supabase memory
- **Internal linking:** Active across all new posts
- **Weekly automation:** Runs with UPSERT, language filter, path fix
- **Protection:** 3 walls active + path doubling auto-fix

## Prevention Systems Added Today
1. Wall 1: Content validator with 10+ rules and 95% auto-fix
2. Wall 2: Pre-commit hook blocks bad commits
3. Wall 3: GitHub Actions blocks bad deploys
4. Sync script: UPSERT instead of INSERT
5. Empty content guard: Won't publish posts with no content
6. Path doubling auto-fix: Catches `/wiki/#/wiki/#` patterns
7. Language filter: Skips non-English YouTube videos
8. Writer URL restriction: Writers can only link to URLs in their Pre-Flight data
9. Meta description enforcement: 150-160 char range auto-enforced

## Still Outstanding
- Supabase schema fix (author_id UUID vs INT mismatch — using workaround)
- ANTHROPIC_API_KEY not set in environment (blog generation step skipped in automation)
- Newsletter template needs meta description by default
- Future date handling (need publish gate or date-on-deploy logic)
- SEO audit (schema markup, mobile scroll fix, CSP headers)
- Calculator conversion optimization
- Email capture / newsletter signup pipeline

## Key Decisions Made
- Use UPSERT for all Supabase sync operations (prevents duplicate key crashes)
- JSON fallback for blog post authors (Supabase schema needs migration)
- Language detection via Unicode character ranges (>20% non-Latin = skip)
- Path doubling auto-fix in Wall 1 (permanent prevention)
- Internal linking mandatory for all new posts (2-5 links minimum)

## Metrics
- **Total commits today:** 15
- **Files modified:** 47
- **Lines changed:** ~2,400
- **Bugs fixed:** 10 major, 15+ minor
- **Prevention systems added:** 9
- **Content published:** 27 new blog posts
- **Session duration:** ~10 hours

## Next Session Priorities
1. Fix Supabase author_id schema (UUID → INT or add text column)
2. Add ANTHROPIC_API_KEY to environment for autonomous blog generation
3. Implement future-date publish gate
4. SEO audit and fixes
5. Newsletter signup flow
6. Calculator conversion optimization
