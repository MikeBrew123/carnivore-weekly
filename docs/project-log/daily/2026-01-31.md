# Daily Log: 2026-01-31

## Session Summary
Fixed formatting issues across 6 blog posts to match gold standard structure (2026-01-25-complete-carnivore-protocol-report.html).

## Work Completed

### Blog Post Formatting Fixes
**Issue:** Multiple blog posts had wrong fonts, font sizes, and colors due to:
1. Missing Google Fonts links (Libre Baskerville, Source Sans 3)
2. Missing `<div class="post-content">` wrapper
3. blog-post.css missing explicit text color rule

**Fixed Posts:**
- 2025-12-29-lion-diet-challenge.html (fonts + structure)
- 2025-12-25-new-year-same-you.html (fonts)
- 2025-12-27-anti-resolution-playbook.html (fonts)
- 2025-12-28-physiological-insulin-resistance.html (fonts)
- insulin-resistance-morning-glucose.html (fonts)

**Changes:**
1. Added Google Fonts preconnect links to all 5 posts
2. Added `<div class="post-content">` wrapper to lion-diet-challenge
3. Updated blog-post.css with text color rule: `color: var(--cw-text) !important;`

**Commits:**
- d1bd278: Fix missing Google Fonts on 5 blog posts
- 424cee4: Fix lion-diet-challenge formatting to match gold standard

**Status:** ✅ Deployed to production

## Decisions Made
- **blog-post.css must include explicit color rule** - Ensures consistent text rendering across all blog posts
- **All blog posts require Google Fonts links** - Mandatory for Libre Baskerville and Source Sans 3 to load properly
- **All blog posts must have post-content wrapper** - Required for CSS rules to apply correctly
- **Gold standard reference: 2026-01-25-complete-carnivore-protocol-report.html** - Use this as template for all blog post structure

## Technical Notes
**Root Cause Analysis:**
Without Google Fonts links, browsers fall back to Georgia serif instead of brand-standard Libre Baskerville. Without the `post-content` wrapper div, CSS rules don't apply properly, causing text to render at wrong size and color.

**CSS Architecture:**
- External CSS file: `public/css/blog-post.css` (centralized styling)
- All blog posts link to this single CSS file
- Individual posts may have inline styles for themed sections (dark backgrounds with light text)

## Next Steps
- Monitor for additional blog formatting issues
- Consider audit of all 37 blog posts to ensure consistent structure
- Validate that all posts have Google Fonts + post-content wrapper

---

## GitHub Actions Automation Fix

### Problem Discovered
- GitHub Actions workflow `blog_publish.yml` failed on Jan 30-31
- 7 scheduled blog posts (Jan 27-31) never published automatically
- User reported receiving GitHub automation failure notifications

### Root Cause Analysis
**Error:** `FileNotFoundError: [Errno 2] No such file or directory: '/home/runner/work/carnivore-weekly/carnivore-weekly/data/wiki-keywords.json'`

**Why it happened:**
1. Workflow step "Regenerate homepage" calls `python3 scripts/generate.py --type pages`
2. generate.py requires `data/wiki-keywords.json` to build homepage
3. wiki-keywords.json existed locally (15K file) but was excluded by .gitignore
4. .gitignore has blanket rule: `data/*.json` (ignore all data JSON files)
5. Only specific files had exceptions: `!data/blog_posts.json`, `!data/content-of-the-week.json`, etc.
6. wiki-keywords.json was NOT in the exception list
7. GitHub Actions runner couldn't find the file → workflow failed

### Posts That Failed to Publish
1. Coffee on Carnivore: The Practical Answer to the Great Debate (Jan 27)
2. Beginner's Complete Blueprint: Your First 30 Days on Carnivore (Jan 27)
3. Carnivore Didn't Fix Everything: The Honest Truth About Plateaus (Jan 28)
4. Medical Establishment Backlash: Why Experts Keep Attacking Carnivore (Jan 29)
5. Organ Meats for Skeptics: How to Start When Liver Makes You Gag (Jan 30)
6. Real 2-Week Results: What Actually Happens When You Start Carnivore (Jan 30)
7. Meal Timing on Carnivore: Does It Actually Matter? (Jan 31)

### Resolution
**Immediate fix (manually ran scripts):**
1. Executed `python3 scripts/check_scheduled_posts.py` locally
2. Published 7 overdue posts to `data/blog_posts.json` (set `"published": true`)
3. Executed `python3 scripts/generate_blog_pages.py` to regenerate blog index + RSS
4. Committed changes: blog_posts.json, blog/index.html, feed.xml, sitemap.xml

**Permanent fix (prevent future failures):**
1. Updated `.gitignore` to add exception: `!data/wiki-keywords.json`
2. Committed `data/wiki-keywords.json` (15K, 349 lines) to repository
3. Future GitHub Actions runs will have access to this file

### Files Modified
- `.gitignore` - Added wiki-keywords.json exception
- `data/wiki-keywords.json` - Committed to repository (previously gitignored)
- `data/blog_posts.json` - 7 posts marked as published
- `public/blog/index.html` - Regenerated with 7 new posts
- `public/feed.xml` - Updated RSS feed
- `sitemap.xml` - Updated

### Commits
- **e8cd434:** "Publish 7 overdue blog posts (Jan 27-31)"
- **f19f52c:** "Add wiki-keywords.json to fix GitHub Actions workflow"

### Verification
- All 7 posts now live at carnivoreweekly.com/blog/
- Blog index shows all 46 published posts
- RSS feed updated with new posts
- Workflow will succeed on next scheduled run (tomorrow 9 AM EST)

### Lessons Learned
- GitHub Actions logs accessible via `gh run list --workflow=blog_publish.yml`
- Check for missing files that exist locally but aren't committed
- .gitignore blanket rules can hide required files
- Always add required data files to .gitignore exceptions
