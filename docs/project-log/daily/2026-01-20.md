# Daily Log - 2026-01-20

## Session 2: Weekly Automation Pipeline Fixes

**Logged By:** Quinn (Operations)

### Summary
Major fixes applied to the weekly automation pipeline. Five distinct issues resolved across sentiment storage, video commentary, trending topics, featured insights, and feedback modal functionality.

### Completed Work

**1. Sentiment Storage Fix** (`scripts/add_sentiment.py`)
- Problem: Sentiment was written to `analyzed_content.json` but `generate.py` reads from `youtube_data.json`
- Fix: Now writes sentiment directly to `youtube_data.json`
- Result: Sentiment scores persist through automation runs

**2. Video Commentary Loading Fix** (`scripts/generate.py`)
- Problem: Supabase cache served stale videos, overriding fresh youtube_data.json
- Fix: Added JSON priority - when editorial commentary exists, use JSON data first
- Result: All 6 videos with commentary display correctly

**3. Trending Topics Wiki Linking** (`scripts/content_analyzer_optimized.py`, `scripts/generate.py`)
- Problem: Trending topics linked to "#" (homepage)
- Fix: Updated Chloe's prompt to include wiki keywords and return `wiki_keyword` matches; updated generate.py to parse new format and link to wiki pages
- Result: Trending topics dynamically generated and linked to wiki content

**4. Featured Insights Dynamic Loading** (`scripts/generate.py`, `templates/index_template.html`)
- Problem: Hardcoded content in Featured Insights section
- Fix: Now loads latest 3 published blog posts from `data/blog_posts.json`
- Result: Featured Insights section updates automatically with new blog posts

**5. Feedback Modal Button Fix** (`templates/index_template.html`)
- Problem: Yellow floating button unresponsive to clicks
- Root Cause: Dynamically fetched HTML with `<script>` tags don't auto-execute
- Fix: Explicitly load `/js/feedback-modal.js` after HTML injection
- Result: Feedback modal now functions correctly

### Files Modified

| File | Change |
|------|--------|
| `scripts/add_sentiment.py` | Sentiment storage location |
| `scripts/content_analyzer_optimized.py` | Trending topics with wiki_keyword |
| `scripts/generate.py` | JSON priority, wiki linking, featured blog posts |
| `templates/index_template.html` | Trending tags, Featured Insights, feedback modal |
| `public/index.html` | Regenerated with all fixes |

### Decisions

1. **Templates remain source of truth for homepage** - Not JSON, not cached data
2. **JSON data takes priority over Supabase cache** - When editorial content exists in JSON
3. **Trending topics should be dynamic** - Generated by Chloe, linked to wiki when possible

### Deployment
- All changes pushed to production
- Site live at carnivoreweekly.com
- Next `run_weekly_update.sh` will apply all fixes automatically

### Blockers
None.

### Next Actions
- Monitor next automation run for regression
- Validate all fixes persist through weekly update cycle

---

## Session 1: GEO (Generative Engine Optimization) Implementation

---

## Accomplishments

### 1. SEO-GEO Skill Installation
- Installed seo-geo-2026 skill from `/Users/mbrew/Developer/Skills/seo-geo-skill`
- Installed to `~/.claude/skills/seo-geo-2026/`
- Skill provides GEO auditing capabilities for AI search visibility

### 2. Full GEO Audit on carnivoreweekly.com
**Audit Results:**
| Metric | Score | Status |
|--------|-------|--------|
| Entity Density | 2.83% | Good |
| AI Bot Access | 5/5 bots GRANTED | Excellent |
| GEO Score | 3/10 | Needs improvement |
| Schema | FAIL | No JSON-LD found |

**AI Bots with Access:**
- OAI-SearchBot (OpenAI)
- PerplexityBot
- Applebot-Extended
- Googlebot
- Bingbot

### 3. JSON-LD Schema Implementation (Schema Fix)
Added structured data to fix the Schema FAIL:

**WebSite Schema:**
- name: Carnivore Weekly
- url: https://carnivoreweekly.com
- description: Weekly carnivore diet research, tools, and insights

**Organization Schema:**
- name: Carnivore Weekly
- url: https://carnivoreweekly.com
- logo: /images/cw-logo-gold.png
- description: No-bullshit carnivore diet research

**Files Updated:**
- `public/index.html` (immediate production)
- `templates/index_template.html` (survives weekly automation)

**Note:** sameAs links omitted (YouTube empty, no Twitter account yet)

### 4. Deployment
- Committed: "Add JSON-LD schema for GEO/Knowledge Graph visibility"
- Deployed to production

---

## GEO Score Breakdown

**Current Score: 3/10**

What we have:
- Entity density is solid (2.83%)
- All AI bots can access the site
- Basic JSON-LD schema now in place

What we need for higher score:
- Question-based headers (convert "Overview" to "What is X?")
- Comparison tables for AI extractability
- FAQ Schema on blog posts
- More structured content patterns

---

## Decisions

### Decision: sameAs Links Deferred
**Context:** JSON-LD Organization schema supports sameAs links (YouTube, Twitter, etc.)
**Decision:** Will add sameAs links later when YouTube has content and/or Twitter account is created
**Rationale:** Empty social links provide no value; better to add when accounts are active

---

## Remaining GEO Improvements (Future Work)

**Priority improvements for 7-8/10 GEO score:**
1. Convert headers to question format ("What is the carnivore diet?" vs "Overview")
2. Add comparison tables (AI systems extract tabular data well)
3. Add FAQ Schema to blog posts
4. Implement HowTo schema for calculator/tools

**Estimated effort:** 2-3 hours for significant improvement

---

## Technical Notes

- GEO skill location: `~/.claude/skills/seo-geo-2026/`
- Schema added to both template and production file to ensure persistence
- Entity density above 2% is considered good for AI extraction

---

## Next Actions
1. Monitor Google Search Console for schema validation
2. Consider question-based header conversion for high-traffic pages
3. Add FAQ Schema to top 5 blog posts
4. Add sameAs links when social accounts are active

---

**Session End:** GEO foundation established, site now has basic Knowledge Graph visibility
